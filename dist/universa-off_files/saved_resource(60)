   !function(){"use strict";window.universal_variable=window.universal_variable||{},window.universal_variable.aud={typePublication:"uol template",central:"",special:"",channel:"",subchannel:"",collection:"",tags:"",refStation:"",mediaType:"",mediaName:"",mediaTitle:"",mediaId:"",components:[],abTest:""},window.isUolNewGraphicDesign=!0,window.hitAudience={},window.hitAudience.attr=function(e,n){return e?(n&&(window.universal_variable.sc[e]=n,window.universal_variable.aud[e]=n),window.universal_variable.aud[e]):(console.warn("hitAudience.attr: Attributo é obrigatório"),!1)},window.hitAudience.countMetrics=function(e){for(var n in e.publicationDate&&(e.publicationDate=e.publicationDate.replace(/^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})$/,"$3/$2/$1 $4:$5:$6")),e)universal_variable.aud[n]=e[n];(void 0===e.author||null===e.author)&&"author"in universal_variable.aud&&delete universal_variable.aud.author,window.universal_variable.sc=window.universal_variable.aud;try{UOLPD.Audience2.countMetrics()}catch(e){window.hitAudience.intervalGA=window.setInterval(function(){"undefined"!=typeof UOLPD&&void 0!==UOLPD.Audience2&&(window.hitAudience.intervalGA=window.clearInterval(window.hitAudience.intervalGA),UOLPD.Audience2.countMetrics())},50)}console.info("countMetrics",e)},window.hitAudience.countClick=function(e,n){if(hitAudience.categoryCheck(e))return!1;try{(e="object"==typeof e?e:JSON.parse(e)).mediaName=e.mediaName?e.mediaName:window.universal_variable.aud.mediaName,e.central=e.central?e.central:window.universal_variable.aud.central,e.channel=e.channel?e.channel:window.universal_variable.aud.channel,e.publicationDate=e.publicationDate?e.publicationDate:window.universal_variable.aud.publicationDate,["print","onlyLoad","refs"].map(function(n){delete e[n]}),e.onlyLoad||(e.action=e.action||(-1==["","#","javascript:void(0)"].map(function(e){return e==n}).indexOf(!0)&&n?n:"clique"),UOLPD.Audience2.countClick(e),console.info("countClick",e))}catch(e){console.log("Erro ao enviar métricas de clique para o google",e)}},window.hitAudience.countMedia=function(e){try{UOLPD.Audience2.countMedia(e)}catch(e){}console.info("countMedia",e)},window.hitAudience.countImpression=function(e){try{UOLPD.Audience.countImpression({components:[e]})}catch(e){}console.info("countImpression",e)},window.hitAudience.countEvent=function(e,n){if(!n&&hitAudience.categoryCheck(e))return!1;try{e.mediaName=e.mediaName?e.mediaName:window.universal_variable.aud.mediaName,e.central=e.central?e.central:window.universal_variable.aud.central,e.channel=e.channel?e.channel:window.universal_variable.aud.channel,UOLPD.Audience2.countEvent(e)}catch(e){}console.info("countEvent",e)},hitAudience.categoryCheck=function(e){if(e&&e.category&&-1!=e.category.indexOf("undefined"))return console.warn("Category não definida. Métrica não será disparada! ",e),!0},!window.hasOwnProperty("Audience")||Audience.hasOwnProperty("firstView")&&!1===Audience.firstView||(window.profileAvatarComponent&&window.profileAvatarComponent(),window.hitAudience.countMetrics(Audience),Audience.firstView=!0);var e=function(){this.getAttribute("data-audience-click")&&window.hitAudience.countClick.call(this,this.getAttribute("data-audience-click"),this.getAttribute("href"))};$("body").on("click","[data-audience-click]",e).on("change","select[data-audience-click]",e)}(),function(){n&&console.log("[audience view] load");var e=Array.prototype.forEach,n=!!location.search.match(/debugComponentsImpression/),i=0,t=[],o=[];window.addEventListener("unload",function(e){p()},!0);var a=!0,c=function(){a=!0};window.addEventListener("scroll",c),window.addEventListener("click",c),window.addEventListener("resize",c);var r=function(){return location.host+location.pathname},u=r(),d=function(e){return function(e){return 0==e.offsetHeight&&0==e.offsetWidth?(n&&console.log("[audience view] componente não está visível (display none)"),!1):"hidden"==window.getComputedStyle(e,null).getPropertyValue("visibility")?(n&&console.log("[audience view] componente não está visível (visibility hidden)"),!1):(n&&console.log("[audience view] componente está visível"),!0)}(e)&&function(e){var i=e.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight;return i.bottom<0?(n&&console.log("[audience view] não passou na regra 1",i.bottom),!1):i.top>t?(n&&console.log("[audience view] não passou na regra 2",i.top,t),!1):i.top<0&&i.height+i.top<0?(n&&console.log("[audience view] não passou na regra 3",i.top,i.height),!1):(n&&console.log("[audience view] componente está no viewport (top: %d / bottom: %d / height: %d / client: %d)",i.top,i.bottom,i.height,t),!0)}(e)},l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,50)},s=function(){if(0==a)return m();a=!1;var i=document.querySelectorAll("[data-audience-print]");e.call(i,function(e){if(n&&console.log("[audience view] verificando componente",e),""==e.getAttribute("data-audience-print"))return n&&console.log("[audience view] componente com atributo data-audience-print vazio, ignorando."),!1;if(null!=e.getAttribute("data-audience-print-sent"))return n&&console.log("[audience view] componente já foi contabilizado"),!1;if(1==d(e)){var i=(new Date).getTime();if(null!=e.getAttribute("data-audience-print-visible"))return n&&console.log("[audience view] componente já foi exibido e está esperando contabilização"),!1;!0===n&&(e.style.border="1px solid orange"),e.setAttribute("data-audience-print-visible",i),e.setAttribute("data-audience-print-url",u),t.push({el:e,time:i,channel:window.universal_variable&&window.universal_variable.sc&&window.universal_variable.sc.channel||"not defined"})}else null!==e.getAttribute("data-audience-print-visible")&&(n&&console.log("[audience view] componente saiu do viewport antes de ser contabilizado"),w(e))}),m()},w=function(e){t=t.filter(function(i){return n&&console.log("[audience view] removendo marcação de viewport",e,i.el),e!=i.el||(e.removeAttribute("data-audience-print-visible"),e.removeAttribute("data-audience-print-sent"),!0===n&&(e.style.border=""),!1)})},v=function(a){if(r()!=u){var c=u,d=r();u=r(),l(function(){!function(i,t){n&&console.log("[audience view] onLocationChange()",i,t);var o=document.querySelectorAll('[data-audience-print-url="'+i+'"]');n&&console.log("[audience view] total de componentes da página antiga: ",o.length),e.call(o,function(e){n&&console.log("[audience view] removendo marcação de visto em componentes de url antiga",e),e.removeAttribute("data-audience-print-visible"),e.removeAttribute("data-audience-print-sent")})}(c,d)})}var w;return a=a||new Date,w=(new Date).getTime(),t=t.filter(function(e){if(w-e.time>2e3){try{var i=JSON.parse(e.el.getAttribute("data-audience-print"));n&&console.log("[audience view] component name: ",i.component),e.el.setAttribute("data-audience-print-sent","true"),!0===n&&(e.el.style.border="1px solid green"),o.push(i)}catch(e){}return!1}return!0}),p(),i?a-i>1e3?(i=a,l(s)):m():(i=a,m())},p=function(){var e;o.length&&(n&&console.log("[audience view] countImpression() enviando componentes"),e=o.splice(0),window.UOLPD&&UOLPD.Audience2&&UOLPD.Audience2.countEvent?(n&&console.log("[audience view] enviando impressão de components: ",e),e.forEach(function(e){var n=Math.floor(10*Math.random());e.action=e.action||"impressao",e.label=e.label||"componente-visualizado",e.impression=e.impression||1,e.hasOwnProperty("nonInteraction")||(e.nonInteraction=!0),n<2&&hitAudience.countEvent(e,!0)})):console.info("[audience view] UOLPD.Audience.countImpression não existe"))},m=function(){l(v)};m()}();   